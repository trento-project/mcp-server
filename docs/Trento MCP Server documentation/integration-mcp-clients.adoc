// Copyright 2025 SUSE LLC
// SPDX-License-Identifier: Apache-2.0

:badge-url: https://vscode.dev/redirect/mcp/install?name=trento&config=%7B%22servers%22%3A%7B%22mcp-server-trento%22%3A%7B%22type%22%3A%22http%22%2C%22url%22%3A%22http%3A//localhost%3A5000/mcp%22%2C%22headers%22%3A%7B%22X-TRENTO-MCP-APIKEY%22%3A%22your-actual-trento-api-key-here%22%7D%7D%7D%7D
:badge-img: https://img.shields.io/badge/VS_Code-Install_Server-0098FF?style=flat-square&logo=visualstudiocode&logoColor=white


= Integrating the Trento MCP Server with MCP Hosts

The Trento MCP Server can be integrated with any client application that supports the Model Context Protocol (MCP). This allows you to interact with the Trento API and execute tools defined in the OpenAPI specification through your preferred AI assistant or development tool.

This guide uses Visual Studio Code with GitHub Copilot as the primary example, but the configuration patterns apply to any MCP-compatible host.

== Prerequisites

Before configuring your MCP Host, ensure you have:

. *A running Trento Server installation* with the MCP Server component enabled
** Follow the link:installation.adoc[Installation Guide] to deploy Trento Server and enable the MCP Server.
** Note the MCP Server endpoint URL (e.g., `http://trento.example.com/mcp-server-trento/mcp`)

. *A Trento API token (Personal Access Token)*
** Log in to your Trento web interface with your username and password
** Click on your username in the top-right corner and select *Profile*
** Scroll down to the *Personal Access Tokens* section
** Click the *Generate Token* button
** Enter a descriptive name for the token (e.g., "VS Code MCP Client")
** Optionally configure an expiration date for the token, or select *Never Expires*
** Click *Generate Token*
** *Important:* Copy the generated token immediately and store it securely - it will not be shown again

== Configuring Your MCP Host

Once you have your Trento installation ready with the MCP Server URL and API token, configure your MCP Host. The examples below show JSON configuration format, which is used by most MCP Hosts including VS Code, Claude Desktop, and others.

=== Option 1: Secure Configuration with Prompted Input (Recommended)

This configuration prompts you for your API key when the Host starts, keeping credentials secure and out of configuration files. The `password: true` setting ensures your API key input is masked when you type it.

[NOTE]
====
This option is supported by most MCP Hosts including VS Code. Check your MCP Host's documentation if the prompt feature is not available.
====

[source,json]
----
{
  "servers": {
    "trento": {
      "type": "http",
      "url": "http://trento.example.com/mcp-server-trento/mcp",
      "headers": {
        "X-TRENTO-MCP-APIKEY": "${input:trento-api-key}"
      }
    }
  },
  "inputs": [
    {
      "type": "promptString",
      "id": "trento-api-key",
      "description": "Trento API Key",
      "password": true
    }
  ]
}
----

[NOTE]
====
Alternatively, you can use this link to install the server directly in VS Code: link:{badge-url}[image:{badge-img}[Install in VS Code]]
====


=== Option 2: Direct Header Configuration

For MCP Hosts that don't support prompted input, or for testing purposes, you can set your Trento API key directly in the configuration file.

[WARNING]
====
When using this option, ensure your configuration file has appropriate permissions and is not committed to version control systems.
====

[source,json]
----
{
  "servers": {
    "trento": {
      "type": "http",
      "url": "http://trento.example.com/mcp-server-trento/mcp",
      "headers": {
        "X-TRENTO-MCP-APIKEY": "your-actual-trento-api-key-here"
      }
    }
  }
}
----

[NOTE]
====
Replace `http://trento.example.com/mcp-server-trento/mcp` with your actual Trento MCP Server endpoint URL from your installation.
====

=== Client-Specific Notes

* *VS Code*: Configuration is typically stored in `.vscode/settings.json` or your user settings. The client will remember your API key for the session.
* *Claude Desktop*: Configuration is usually in `~/Library/Application Support/Claude/claude_desktop_config.json` (macOS) or `%APPDATA%\Claude\claude_desktop_config.json` (Windows).
* *Other MCP Hosts*: Refer to your client's documentation for the configuration file location. For examples of how other tools integrate with MCP, see the link:https://github.com/github/github-mcp-server/blob/main/docs/installation-guides/README.md[GitHub MCP Server installation guides].

=== General Configuration Notes

* Replace `http://trento.example.com/mcp-server-trento/mcp` with the actual URL where your Trento MCP Server is accessible
** For Kubernetes deployments with ingress, use the ingress URL (e.g., `https://trento.example.com/mcp-server-trento/mcp`)
** For local or development setups, use `http://localhost:5000/mcp` (adjust port as needed)
** If using Server-Sent Events (SSE) transport instead of the default streamable transport, change the path from `/mcp` to `/sse`. The transport type is configured on the MCP Server using the `TRANSPORT` configuration key or `--transport` flag (see link:configuration-options.adoc[Configuration Options]).
* Replace `your-actual-trento-api-key-here` with the API token you generated from your Trento instance
* If you configured a custom header name (using `HEADER_NAME` or `--header-name`), update `X-TRENTO-MCP-APIKEY` accordingly


=== Troubleshooting

If you encounter issues connecting your MCP Host to the Trento MCP Server:

. *Connection Errors*
** Verify the MCP Server URL is correct and accessible from your development machine
** Check if the MCP Server is running: review logs from your Trento installation
** Ensure network connectivity and any required firewall rules are in place

. *Authentication Errors*
** Verify your API token is valid by testing it directly against your Trento Server API
** Check that the header name matches your server configuration (default: `X-TRENTO-MCP-APIKEY`)
** Ensure the token has the necessary permissions in Trento

. *General Issues*
** Check your MCP Host's developer console or logs for detailed error messages
*** VS Code: Help â†’ Toggle Developer Tools
*** Claude Desktop: Check application logs
*** Other clients: Refer to your client's documentation for log locations
** Review the Trento MCP Server logs for connection attempts and errors
** Refer to the link:installation.adoc#sec-mcp-troubleshooting[Installation Guide Troubleshooting section] for additional help.


== Using the Trento MCP Server

The way you use this MCP Server depends on the specific MCP Host application you're working with. The MCP ecosystem is rapidly evolving, with new hosts and improved user experiences being introduced regularly.

=== MCP Host Documentation

Once configured, you can interact with the Trento MCP Server through your chosen MCP Host. For detailed guidance on leveraging MCP capabilities in different tools, refer to the following official documentation:

* link:https://code.visualstudio.com/docs/copilot/customization/mcp-servers[Visual Studio Code with GitHub Copilot - MCP Server Configuration]
* link:https://docs.claude.com/en/docs/mcp[Claude Desktop - Model Context Protocol Integration]
* link:https://cursor.com/docs/context/mcp[Cursor - MCP Context Integration]
* link:https://cloud.google.com/gemini/docs/codeassist/use-agentic-chat-pair-programmer[Google Cloud Gemini Code Assist - Agentic Chat]
* link:https://docs.windsurf.com/windsurf/cascade/mcp[Windsurf - Cascade MCP Support]

=== Demo

To see the Trento MCP Server in action, watch link:https://www.youtube.com/watch?v=7kDVc3YUR-U[this demonstration video]:

== Additional Resources

* link:installation.adoc[Trento MCP Server Installation Guide] - For deploying and configuring the MCP Server.
* link:configuration-options.adoc[Configuration Options] - For detailed MCP Server configuration reference.
* link:https://modelcontextprotocol.io[Model Context Protocol Documentation] - For general MCP information and client compatibility.
