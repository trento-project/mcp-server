// Copyright 2025 SUSE LLC
// SPDX-License-Identifier: Apache-2.0

ifndef::imagesdir[:imagesdir: ../images]

= Integrating the Trento MCP Server with SLES 16

This guide explains how to connect the Trento MCP Server to https://www.suse.com/news/suse-linux-enterprise-server-16-ai-ready-long-term-support/[SUSE Linux Enterprise Server 16] (SLES 16) using https://github.com/mark3labs/mcphost[MCPHost], a lightweight CLI tool for the Model Context Protocol (MCP).

SLES 16 is designed for modern, AI-powered workloads and agentic applications. If you run SAP landscapes, https://www.suse.com/c/suse-linux-enterprise-server-sap-16-simplified-intelligent-stable/[SUSE Linux Enterprise Server for SAP 16] builds on SLES 16 and pairs naturally with Trento for intelligent, stable operations.

As the MCP ecosystem expands, more MCP hosts and integrations will be available for SLES and SLES for SAP, installable and updatable with `zypper`. This guide focuses on MCPHost for its simplicity and compatibility with remote MCP servers like Trento.

== Prerequisites

Before configuring your MCP Host, ensure you have:

. A SLES 16 system with network access
. An LLM provider and credentials:
** Public hosted options, such as https://aistudio.google.com/app/apikey[Google Gemini], https://platform.openai.com/[OpenAI], etc.
** Private/on-premises option, such as https://documentation.suse.com/suse-ai/1.0/[SUSE AI Platform] - See the guide on xref:Trento MCP Server documentation/integration-suse-ai.adoc[Integrating the Trento MCP Server with SUSE AI].

. *A running Trento Server installation* with the Trento MCP Server component enabled:
** Follow the xref:Trento MCP Server documentation/installation.adoc[Installation Guide] to deploy Trento Server and enable the Trento MCP Server.
** Note the Trento MCP Server endpoint URL (e.g., `https://trento.example.com/mcp-server-trento/mcp`).

. *A Trento API token (Personal Access Token)*:
** Log in to your Trento web interface with your username and password
** Click on your username in the top-right corner and select *Profile*.
** Scroll down to the *Personal Access Tokens* section.
** Click the *Generate Token* button.
** Enter a descriptive name for the token (e.g., "VS Code MCP Client").
** Optionally configure an expiration date for the token, or select *Never Expires*.
** Click *Generate Token*.
** *Important:* Copy the generated token immediately and store it securely - it will not be shown again.

.Generate a Personal Access Token in Trento
image::generate-pat.png[Generate a Personal Access Token in Trento,width=800]

== Install MCPHost on SLES 16

MCPHost is available as a package on SLES 16 and can be installed using the standard SUSE package manager. This ensures you get a version tested for your platform, with automatic updates and dependency management.

To install MCPHost, open a terminal and run:

[source,console]
----
sudo zypper refresh
sudo zypper install mcphost
----

This will download and install the latest available version of MCPHost and any required dependencies.

After installation, verify that MCPHost is available and working by checking its version:

[source,console]
----
mcphost --version
----

If you see the version and copyright, MCPHost is installed correctly and ready for configuration.

== Configure MCPHost

Refer to the official https://github.com/mark3labs/mcphost#installation[MCPHost documentation] for comprehensive configuration details. This section focuses on adding the Trento MCP Server to your system.

MCPHost reads its configuration from several locations; one common location is `~/.mcphost.yml`. Create `~/.mcphost.yml` with the following content:

[source,yaml]
----
mcpServers:
  trento-mcp-server:
    type: "remote"
    url: https://trento.example.com/mcp-server-trento/mcp
    headers:
      - "Authorization: Bearer ${env://TRENTO_PAT}"
----

[NOTE]
====
**Security best practice:** Keep secrets out of configuration files. Store your keys in environment variables instead of hardcoding them.

Export your keys in the shell before running MCPHost:

[source,console]
----
export GOOGLE_API_KEY=<your-google-api-key>
export TRENTO_PAT=<your-trento-personal-access-token>
----
====


* Replace `https://trento.example.com/mcp-server-trento/mcp` with the actual URL where your Trento MCP Server is accessible:
  ** For Kubernetes deployments with ingress, use the ingress URL (e.g., `https://trento.example.com/mcp-server-trento/mcp`).
  ** For local or development setups, use `http://localhost:5000/mcp` (adjust the port as needed).
  ** If using Server-Sent Events (SSE) transport instead of the default streamable transport, change the path from `/mcp` to `/sse` - The transport type is configured on the Trento MCP Server using the `TRANSPORT` configuration key or `--transport` flag (see xref:Trento MCP Server documentation/configuration-options.adoc[Configuration Options]).
* Replace `<your-trento-personal-access-token>` with the API token you generated from your Trento instance.
* If you configured a custom header name (using `HEADER_NAME` or `--header-name`), update `Authorization` accordingly.

[TIP]
====
You can also configure remote LLM models directly in your MCPHost configuration. For example, to use Google Gemini as your model provider:

[source,yaml]
----
model: "google:gemini-2.5-pro"
provider-url: "https://generativelanguage.googleapis.com/v1beta/openai/"
provider-api-key: "${env://GOOGLE_API_KEY}"
----

This configuration uses the `GOOGLE_API_KEY` environment variable you exported earlier.
====

== Run MCPHost and use Trento Tools

[arabic]
. Start MCPHost:
+
[source,console]
----
mcphost
----
+
[TIP]
====
If no servers appear on startup, confirm your configuration file exists at `~/.mcphost.yml` (or another supported location listed in the MCPHost docs) and that your environment variables are exported in the same shell session.
====
. Verify the connection to Trento and basic status:
+
[source,console]
----
/servers
----
+
.MCPHost initial screen with the Trento MCP Server connected
image::mcphost-initial.png[MCPHost initial screen, width=900]
+
. Ask the model to invoke Trento tools using natural language prompts, such as:
+
* "List all SAP systems managed."
* "Show my HANA clusters."
* "Are my SAP systems compliant?"
* "What is the health status of my SAP landscape?"
* "Show me all hosts running SAP applications."
* "Are there any critical alerts I need to address?"
* "Get details about the latest check execution results."
* "Which SAP systems are currently running?"
+
.Example MCPHost session querying Trento about SAP systems
image::example-mcphost.png[Example MCPHost session with Trento,width=900]

== Troubleshooting

If you encounter issues connecting MCPHost to the Trento MCP Server:

. *Connection Errors*
** Verify that the Trento MCP Server URL in `~/.mcphost.yml` is correct and accessible from your SLES 16 system.
** Check if the Trento MCP Server is running by reviewing logs from your Trento installation.
** Ensure network connectivity and that any required firewall rules are in place.
** Test basic connectivity: `curl -I https://trento.example.com/mcp-server-trento/mcp`.

. *Authentication Errors*
** Verify that your API token is valid by testing it directly against your Trento Server API.
** Ensure `TRENTO_PAT` is exported in the same shell session before running `mcphost`.
** Check that the header name matches your server configuration (default: `Authorization`).
** Ensure the token has the necessary permissions in Trento.

. *LLM Provider Errors*
** Verify that `GOOGLE_API_KEY` (or your provider's API key) is exported correctly.
** Check the `provider-url` and `model` configuration in your `~/.mcphost.yml`.
** Confirm that your API key has sufficient quota and permissions with your provider.

. *General Issues*
** Check the MCPHost terminal output for detailed error messages during startup or operation.
** Review the Trento MCP Server logs for connection attempts and errors.
** Verify that your configuration file exists at `~/.mcphost.yml` and has correct YAML syntax.
** Refer to the xref:Trento MCP Server documentation/installation.adoc#sec-mcp-troubleshooting[Installation Guide Troubleshooting section] for additional help.

== Additional Resources

* https://github.com/mark3labs/mcphost#configuration-file-support[MCPHost Configuration Documentation] - For comprehensive MCPHost configuration details.
* xref:Trento MCP Server documentation/installation.adoc[Trento MCP Server Installation Guide] - For deploying and configuring the Trento MCP Server.
* xref:Trento MCP Server documentation/configuration-options.adoc[Configuration Options] - For detailed Trento MCP Server configuration reference.
* https://modelcontextprotocol.io[Model Context Protocol Documentation] - For general MCP information and client compatibility.
