// Copyright 2025 SUSE LLC
// SPDX-License-Identifier: Apache-2.0

== Configuration Options

This document provides an overview of how to configure the `mcp-server-trento` server, including command-line parameters and environment variables.

=== Command-Line Parameters

The `mcp-server-trento` binary accepts several command-line flags to configure its behavior. You can pass these flags when running the binary directly or via the Makefile.

[width="100%",cols="19%,31%,50%",options="header",]
|===
|Flag |Default |Description
|`--port`, `-p` |5000 |The port on which to run the server
|`--oasPath`, `-P` |./api/openapi.json |Path to the OpenAPI spec file
|`--transport` |sse |The protocol to use, choose `streamable` or `sse`
|`--base-url` |""" |Base URL where the mcp is deployed, if none, `http://localhost:port` is used
|`--oauth-enabled` |false |Enable the oauth authentication in the MCP
|`--oauth-authorization-server-url` |https://my-idp.example.com/.well-known/openid-configuration |URL for the OAuth authorization server endpoint
|`--oauth-issuer` |https://my-idp.example.com/ |Issuer for the OAuth flow
|`--oauth-validate-url` |https://my-idp.example.com/userinfo |URL for token validation
|`--trento-url` |https://demo.trento-project.io |URL for the target Trento server
|`--trento-username` |demo |Username for the target Trento server
|`--trento-password` |demopass |Password for the target Trento server
|`--enable-otel`, `-o` |false |Enable OpenTelemetry globally
|`--with-tracer`, `-t` |true |Enable OpenTelemetry tracing
|`--with-logging`, `-l` |true |Enable OpenTelemetry logging
|`--with-metrics`, `-m` |true |Enable OpenTelemetry metrics
|`--otel-debug` |false |Enable OpenTelemetry debug mode
|`--otel-exporter-otlp-endpoint` |http://localhost:4317 |OTLP exporter endpoint (overrides OTEL++_++EXPORTER++_++OTLP++_++ENDPOINT env var)
|`--otel-exporter-otlp-protocol` |grpc |OTLP exporter protocol (e.g., grpc, http/protobuf; overrides OTEL++_++EXPORTER++_++OTLP++_++PROTOCOL env var)
|`--verbosity`, `-v` |0 |Log level verbosity (-1: debug, 0: info, 5: fatal)
|===

You can see all available flags by running:

[source,console]
----
./mcp-server-trento --help
----

=== Environment Variables

You can also configure `mcp-server-trento` using environment variables, especially for OTEL and OAuth settings. These are useful for containerized deployments and CI/CD pipelines.

[width="100%",cols="35%,65%",options="header",]
|===
|Variable |Description
|`OTEL++_++EXPORTER++_++OTLP++_++ENDPOINT` |OTLP exporter endpoint (overridden by `--otel-exporter-otlp-endpoint`)
|`OTEL++_++EXPORTER++_++OTLP++_++PROTOCOL` |OTLP exporter protocol (overridden by `--otel-exporter-otlp-protocol`)
|`OTEL++_++EXPORTER++_++OTLP++_++TRACES++_++PROTOCOL` |OTLP traces protocol (http/json, http/protobuf, grpc)
|`OTEL++_++EXPORTER++_++OTLP++_++METRICS++_++PROTOCOL` |OTLP metrics protocol (http/json, http/protobuf, grpc)
|`OTEL++_++EXPORTER++_++OTLP++_++LOGS++_++PROTOCOL` |OTLP logs protocol (http/json, http/protobuf, grpc)
|`PORT` |The port on which to run the server (overridden by `--port`)
|`OAS++_++PATH` |Path to the OpenAPI spec file (overridden by `--oasPath`)
|===

=== Example Usage

==== Run with Custom Port and OTEL Endpoint

[source,console]
----
./mcp-server-trento --port 8080 --enable-otel --otel-exporter-otlp-endpoint http://otel-collector:4317
----

Or with environment variables:

[source,console]
----
export OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
export PORT=8080
./mcp-server-trento --enable-otel
----
