# Copyright 2025 SUSE LLC
# SPDX-License-Identifier: Apache-2.0

{
    "title": "Chart Values",
    "type": "object",
    "properties": {
        "kubernetesClusterDomain": {
            "type": "string",
            "description": "The Kubernetes cluster domain used for internal service DNS names.",
            "default": "cluster.local"
        },
        "mcpo": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "description": "Enable the MCPO component.",
                    "default": false
                },
                "args": {
                    "type": "array",
                    "description": "Command-line arguments for the MCPO container.",
                    "default": [
                        "--port=8000",
                        "--config",
                        "/app/config/config.json"
                    ],
                    "items": {
                        "type": "string"
                    }
                },
                "image": {
                    "type": "object",
                    "properties": {
                        "repository": {
                            "type": "string",
                            "description": "The container image repository for the MCPO component.",
                            "default": "ghcr.io/open-webui/mcpo"
                        },
                        "tag": {
                            "type": "string",
                            "description": "The container image tag for the MCPO component.",
                            "default": "main"
                        }
                    }
                },
                "resources": {
                    "type": "object",
                    "properties": {
                        "limits": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU limit for the MCPO pod.",
                                    "default": "1"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory limit for the MCPO pod.",
                                    "default": "1Gi"
                                }
                            }
                        },
                        "requests": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU request for the MCPO pod.",
                                    "default": "200m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory request for the MCPO pod.",
                                    "default": "256Mi"
                                }
                            }
                        }
                    }
                },
                "ports": {
                    "type": "array",
                    "description": "Port configuration for the MCPO service.",
                    "default": "[]",
                    "items": {
                        "type": "object"
                    }
                },
                "replicas": {
                    "type": "number",
                    "description": "The number of pod replicas for the MCPO deployment.",
                    "default": 1
                },
                "type": {
                    "type": "string",
                    "description": "The type of Kubernetes service for MCPO (e.g., ClusterIP, NodePort).",
                    "default": "ClusterIP"
                }
            }
        },
        "mcpServer": {
            "type": "object",
            "properties": {
                "ingress": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "description": "Enable ingress for the mcpServer service.",
                            "default": true
                        },
                        "ingressClassName": {
                            "type": "string",
                            "description": "The class of the ingress controller to use.",
                            "default": "traefik"
                        },
                        "tls": {
                            "type": "boolean",
                            "description": "Enable TLS for the ingress.",
                            "default": true
                        },
                        "hosts": {
                            "type": "array",
                            "description": "Ingress hosts configuration for the mcpServer service.",
                            "default": "[]",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "args": {
                    "type": "array",
                    "description": "Command-line arguments for the MCP Server container. Includes settings for port, transport, paths, and Trento connection details.",
                    "default": [
                        "--port=8080",
                        "--transport=sse",
                        "--oasPath=/app/api/openapi.json",
                        "--oauth-enabled=false",
                        "--trento-url=https://demo.trento-project.io",
                        "--trento-username=demo",
                        "--trento-password=demopass"
                    ],
                    "items": {
                        "type": "string"
                    }
                },
                "image": {
                    "type": "object",
                    "properties": {
                        "repository": {
                            "type": "string",
                            "description": "The container image repository for the MCP Server component.",
                            "default": "ghcr.io/trento-project/trento-mcp-server"
                        },
                        "tag": {
                            "type": "string",
                            "description": "The container image tag for the MCP Server component.",
                            "default": "latest"
                        }
                    }
                },
                "resources": {
                    "type": "object",
                    "properties": {
                        "limits": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU limit for the MCP Server pod.",
                                    "default": "500m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory limit for the MCP Server pod.",
                                    "default": "512Mi"
                                }
                            }
                        },
                        "requests": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU request for the MCP Server pod.",
                                    "default": "100m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory request for the MCP Server pod.",
                                    "default": "128Mi"
                                }
                            }
                        }
                    }
                },
                "ports": {
                    "type": "array",
                    "description": "Port configuration for the mcpServer service.",
                    "default": "[]",
                    "items": {
                        "type": "object"
                    }
                },
                "replicas": {
                    "type": "number",
                    "description": "The number of pod replicas for the MCP Server deployment.",
                    "default": 1
                },
                "type": {
                    "type": "string",
                    "description": "The type of Kubernetes service for MCP Server (e.g., ClusterIP, NodePort).",
                    "default": "ClusterIP"
                }
            }
        }
    }
}
