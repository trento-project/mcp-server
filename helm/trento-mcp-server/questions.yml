# Copyright 2025 SUSE LLC
# SPDX-License-Identifier: Apache-2.0

{
    "title": "Chart Values",
    "type": "object",
    "properties": {
        "kubernetesClusterDomain": {
            "type": "string",
            "description": "The Kubernetes cluster domain used for internal service DNS names.",
            "default": "cluster.local"
        },
        "mcpo": {
            "type": "object",
            "properties": {
                "enabled": {
                    "type": "boolean",
                    "description": "Enable the MCPO component.",
                    "default": false
                },
                "args": {
                    "type": "array",
                    "description": "Command-line arguments for the MCPO container.",
                    "default": [
                        "--port=8000",
                        "--config",
                        "/app/config/config.json"
                    ],
                    "items": {
                        "type": "string"
                    }
                },
                "image": {
                    "type": "object",
                    "properties": {
                        "repository": {
                            "type": "string",
                            "description": "The container image repository for the MCPO component.",
                            "default": "ghcr.io/open-webui/mcpo"
                        },
                        "tag": {
                            "type": "string",
                            "description": "The container image tag for the MCPO component.",
                            "default": "main"
                        }
                    }
                },
                "resources": {
                    "type": "object",
                    "properties": {
                        "limits": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU limit for the MCPO pod.",
                                    "default": "1"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory limit for the MCPO pod.",
                                    "default": "1Gi"
                                }
                            }
                        },
                        "requests": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU request for the MCPO pod.",
                                    "default": "200m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory request for the MCPO pod.",
                                    "default": "256Mi"
                                }
                            }
                        }
                    }
                },
                "ports": {
                    "type": "array",
                    "description": "Port configuration for the MCPO service.",
                    "default": "[]",
                    "items": {
                        "type": "object"
                    }
                },
                "replicas": {
                    "type": "number",
                    "description": "The number of pod replicas for the MCPO deployment.",
                    "default": 1
                },
                "type": {
                    "type": "string",
                    "description": "The type of Kubernetes service for MCPO (e.g., ClusterIP, NodePort).",
                    "default": "ClusterIP"
                }
            }
        },
        "mcpServer": {
            "type": "object",
            "properties": {
                "ingress": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "description": "Enable ingress for the mcpServer service.",
                            "default": true
                        },
                        "ingressClassName": {
                            "type": "string",
                            "description": "The class of the ingress controller to use.",
                            "default": "traefik"
                        },
                        "tls": {
                            "type": "boolean",
                            "description": "Enable TLS for the ingress.",
                            "default": true
                        },
                        "hosts": {
                            "type": "array",
                            "description": "Ingress hosts configuration for the mcpServer service.",
                            "default": "[]",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                },
                "args": {
                    "type": "array",
                    "description": "Custom command-line arguments for the MCP Server container. If specified, this overrides the individual parameters below.",
                    "default": "[]",
                    "items": {
                        "type": "string"
                    }
                },
                "port": {
                    "type": "number",
                    "description": "The port on which the MCP Server listens for incoming connections.",
                    "default": 8080
                },
                "transport": {
                    "type": "string",
                    "description": "The transport protocol to use for MCP communication. Options: 'streamable' (default) or 'sse'.",
                    "default": "streamable"
                },
                "oasPath": {
                    "type": "string",
                    "description": "Path to the OpenAPI specification file within the container. This file defines the available API operations.",
                    "default": "https://demo.trento-project.io/api/v1/openapi"
                },
                "trentoURL": {
                    "type": "string",
                    "description": "URL of the target Trento server to connect to for API operations and data retrieval.",
                    "default": "https://demo.trento-project.io"
                },
                "headerName": {
                    "type": "string",
                    "description": "The HTTP header name used to pass the Trento API key for authentication with the Trento server.",
                    "default": "X-TRENTO-MCP-APIKEY"
                },
                "tagFilter": {
                    "type": "array",
                    "description": "List of OpenAPI tags to filter which operations are exposed as MCP tools. Only operations with at least one matching tag will be available.",
                    "default": "[]",
                    "items": {
                        "type": "string"
                    }
                },
                "verbosity": {
                    "type": "string",
                    "description": "The logging verbosity level. Options: 'debug', 'info', 'warning', 'error'.",
                    "default": "info"
                },
                "insecureTLS": {
                    "type": "boolean",
                    "description": "Skip TLS certificate verification when connecting to HTTPS URLs. Use only in development or trusted environments.",
                    "default": false
                },
                "image": {
                    "type": "object",
                    "properties": {
                        "repository": {
                            "type": "string",
                            "description": "The container image repository for the MCP Server component.",
                            "default": "ghcr.io/trento-project/trento-mcp-server"
                        },
                        "tag": {
                            "type": "string",
                            "description": "The container image tag for the MCP Server component.",
                            "default": "latest"
                        }
                    }
                },
                "resources": {
                    "type": "object",
                    "properties": {
                        "limits": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU limit for the MCP Server pod.",
                                    "default": "500m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory limit for the MCP Server pod.",
                                    "default": "512Mi"
                                }
                            }
                        },
                        "requests": {
                            "type": "object",
                            "properties": {
                                "cpu": {
                                    "type": "string",
                                    "description": "The CPU request for the MCP Server pod.",
                                    "default": "100m"
                                },
                                "memory": {
                                    "type": "string",
                                    "description": "The memory request for the MCP Server pod.",
                                    "default": "128Mi"
                                }
                            }
                        }
                    }
                },
                "ports": {
                    "type": "array",
                    "description": "Port configuration for the mcpServer service.",
                    "default": "[]",
                    "items": {
                        "type": "object"
                    }
                },
                "replicas": {
                    "type": "number",
                    "description": "The number of pod replicas for the MCP Server deployment.",
                    "default": 1
                },
                "type": {
                    "type": "string",
                    "description": "The type of Kubernetes service for MCP Server (e.g., ClusterIP, NodePort).",
                    "default": "ClusterIP"
                },
                "env": {
                    "type": "object",
                    "description": "Additional environment variables to set in the MCP Server container.",
                    "default": {}
                },
                "config": {
                    "type": "object",
                    "properties": {
                        "enabled": {
                            "type": "boolean",
                            "description": "Enable mounting a configuration file for the MCP Server.",
                            "default": false
                        },
                        "fileName": {
                            "type": "string",
                            "description": "Name of the configuration file inside the config map.",
                            "default": "trento-mcp-server.config.yaml"
                        },
                        "mountPath": {
                            "type": "string",
                            "description": "Path where the configuration file will be mounted.",
                            "default": "/etc/trento"
                        },
                        "content": {
                            "type": "string",
                            "description": "YAML content of the configuration file.",
                            "default": "# Example configuration file (disabled by default)\n# port: 8080\n# oasPath: https://demo.trento-project.io/api/v1/openapi\n# transport: streamable\n# trentoURL: https://demo.trento-project.io\n# trentoHeaderName: X-TRENTO-MCP-APIKEY\n# tagFilter:\n#   - MCP\n# verbosity: info\n# insecureTLS: false\n"
                        }
                    }
                }
            }
        }
    }
}
